<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <script>
        window.jQuery = window.$ = require('jquery');
    </script>
    <script type="text/javascript" src="../node_modules/datatables.net/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../node_modules/datatables.net-dt/css/jquery.dataTables.min.css">
    <script type="text/javascript" src="../lib/colResize/dataTables.colResize.js"></script>
    <link rel="stylesheet" type="text/css" href="../node_modules/jquery-contextmenu/dist/jquery.contextMenu.min.css">

    <script src="../node_modules/riot/riot+compiler.min.js"></script>
    <script type="riot/tag" src="../app/tags/select-page-tabs.tag"></script>
    <script type="riot/tag" src="../app/tags/library-datatable.tag"></script>
    <script type="riot/tag" src="../app/tags/search-datatable.tag"></script>
</head>

<body>
    <main></main>
</body>

<script type="riot/tag">
    <main>
        <select-page-tabs></select-page-tabs>
        <div show="{ index===0 }">
            <input type="button" value="show" onClick="{showPlayer}">     
            <library-datatable></library-datatable>
        </div>
        <search-datatable show="{ index===1 }"><div>test2</div></search-datatable>
        <search-datatable show="{ index===2 }"><div>test3</div></search-datatable>
        obs.on("update", () => {
            console.log("main update")
            this.update()
        })      
    </main>
</script>
<script>
    const remote = require('electron').remote
    const base_dir = remote.getGlobal('sharedObj').base_dir

    require('jquery-contextmenu');
    var obs = riot.observable();
    
    this.index = 0;
    obs.on("selindex", (index) => {
        //console.log("selindex = ", index)
        this.index = index
        obs.trigger("update")
    })
    
    function Employee(image, name, position, salary, office) {
         this.image = image;
         this.name = name;
         this.position = position;
         this.salary = salary;
         this._office = office;

         this.office = function () {
             return this._office;
         }
    };
    this.showPlayer = () => {
        console.log("showPlayer")
        const data_dir = `${base_dir}/test/datatables/data`
        const data_http1 = "http://localhost:8000/brie1"
        const data_http2 = "http://localhost:8000/brie2"
        const datas = [
            new Employee(data_http1, "http Nixon", "System Architect", "$3,120", "Edinburgh"),
            new Employee(`${data_dir}/brie.jpg`, "Tiger Nixon", "System Architect", "$3,120", "Edinburgh"),
            new Employee(`${data_dir}/cheddar.jpg`, "Garrett Winters", "Director", "$5,300", "Edinburgh"),
            new Employee(`${data_dir}/brie.jpg`, "Garrett", "Director", "$5,300", "Edinburgh"),
            new Employee(`${data_dir}/brie.jpg`, "Winters", "Director", "$5,300", "Edinburgh"),
            new Employee(`${data_dir}/cheddar.jpg`, "t Winters", "Director", "$5,300", "Edinburgh"),
            new Employee(data_http2, "http Winters", "Director", "$5,300", "Edinburgh"),
        ]
        obs.trigger("receivedData", datas)
    }
    riot.mount('*');
</script>

</html>