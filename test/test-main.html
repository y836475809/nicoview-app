<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <script>
        window.jQuery = window.$ = require('jquery');
    </script>
    <script type="text/javascript" src="../node_modules/datatables.net/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../node_modules/datatables.net-dt/css/jquery.dataTables.min.css">
    <script type="text/javascript" src="../lib/colResize/dataTables.colResize.js"></script>
    <link rel="stylesheet" type="text/css" href="../node_modules/jquery-contextmenu/dist/jquery.contextMenu.min.css">

    <script src="../node_modules/riot/riot+compiler.min.js"></script>
    <script type="riot/tag" src="../app/tags/select-page-tabs.tag"></script>
    <script type="riot/tag" src="../app/tags/library-datatable.tag"></script>
    <script type="riot/tag" src="../app/tags/search-datatable.tag"></script>

    <!-- <style type="text/css">
        html {
            height: 100%;
        }

        body {
            height: 100%;
            margin: 0;
        }

        #page1 {
            /* height: 100%; */
        }        
    </style> -->
</head>

<body>
    <select-page-tabs></select-page-tabs>
    <div id="page1">
        <input type="button" value="show" onClick="showPlayer();">     
        <input type="button" value="size" onClick="setSize();">     
        <library-datatable></library-datatable>
    </div>
    <div id="page2">
        <search-datatable></search-datatable>
    </div>
    <div id="page3">
        test
        <!-- <search-datatable></search-datatable> -->
    </div>
</body>

<script>
    const remote = require('electron').remote
    const base_dir = remote.getGlobal('sharedObj').base_dir

    require('jquery-contextmenu');
    var obs = riot.observable();
    
    this.index = 0;
    let selectPage = (index)=>{
        let page1 = document.getElementById("page1");
        let page2 = document.getElementById("page2");
        let page3 = document.getElementById("page3");

        let list = ["none", "none", "none"];
        list[index] = "block";
        //obs.trigger("update")
        page1.style.display = list[0];
        page2.style.display = list[1];
        page3.style.display = list[2];       
    };

    selectPage(this.index);


    obs.on("selindex", (index) => {
        console.log("selindex = ", index)
        this.index = index;
        
        selectPage(index)
    })
    
    function Employee(image, name, position, salary, office) {
         this.image = image;
         this.name = name;
         this.position = position;
         this.salary = salary;
         this._office = office;

         this.office = function () {
             return this._office;
         }
    };
    let showPlayer = () => {
        console.log("showPlayer")
        const data_dir = `${base_dir}/test/datatables/data`
        const data_http1 = "http://localhost:8000/brie1"
        const data_http2 = "http://localhost:8000/brie2"
        const datas = [
            new Employee(data_http1, "http Nixon", "System Architect", "$3,120", "Edinburgh"),
            new Employee(`${data_dir}/brie.jpg`, "Tiger Nixon", "System Architect", "$3,120", "Edinburgh"),
            new Employee(`${data_dir}/cheddar.jpg`, "Garrett Winters", "Director", "$5,300", "Edinburgh"),
            new Employee(`${data_dir}/brie.jpg`, "Garrett", "Director", "$5,300", "Edinburgh"),
            new Employee(`${data_dir}/brie.jpg`, "Winters", "Director", "$5,300", "Edinburgh"),
            new Employee(`${data_dir}/cheddar.jpg`, "t Winters", "Director", "$5,300", "Edinburgh"),
            new Employee(data_http2, "http Winters", "Director", "$5,300", "Edinburgh"),
        ]
        obs.trigger("receivedData", datas)
    }
    let setSize = () => {
        obs.trigger("setSize");
    };
    riot.mount('select-page-tabs');
    riot.mount('#page1 library-datatable', {id:"table_id"});
    riot.mount('#page2 search-datatable');
</script>

</html>