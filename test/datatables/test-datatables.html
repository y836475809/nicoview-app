<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
        <script>
            window.jQuery = window.$ = require('jquery');
    </script>
    <!-- <link rel="stylesheet" type="text/css" href="../../lib/DataTables/datatables.css"> -->
    <!-- <script type="text/javascript" charset="utf8" src="../../lib/DataTables/datatables.js"></script> -->
    <!-- <script type="text/javascript" language="javascript" src="../../lib/colResize/dataTables.colResize.js"></script> -->
    <!-- <script  type="text/javascript" src="../../node_modules/datatables.net-dt/js/dataTables.dataTables.min.js"></script> -->
    <script  type="text/javascript" src="../../node_modules/datatables.net/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../../node_modules/datatables.net-dt/css/jquery.dataTables.min.css">

    <!-- <link rel="stylesheet" type="text/css" href="../../node_modules/datatables.net-fixedcolumns-dt/css/fixedColumns.dataTables.min.css"> -->
    <!-- <script type="text/javascript" src="../../node_modules/dt-colresize/js/dataTables.colResize.js"></script> -->
    <!-- <link rel="stylesheet" type="text/css" href="../../node_modules/dt-colresize/css/dataTables.colResize.css"> -->
    <!-- <link rel="stylesheet" type="text/css" href="style.css"> -->
    <!-- <script type="text/javascript" src="../../lib/jquery-3.2.1.min.js"></script> -->

    <!-- <script  type="text/javascript" src="../../lib/ColReorderWithResize-2.1/ColReorderWithResize.js"></script> -->
    <script  type="text/javascript" src="../../lib/colResize/dataTables.colResize.js"></script>
</head>
<script>  
    const remote = require('electron').remote
    const base_dir = remote.getGlobal('sharedObj').base_dir
    // var $  = require( 'jquery' );
    // var dt = require('datatables.net-dt' )(window, $);
    // require('datatables.net' )(window, $);
    // require(`${base_dir}/lib/ColReorderWithResize-2.1/ColReorderWithResize.js` )
    // require(`${base_dir}/lib/colResize/dataTables.colResize.js` )
    // require('dt-colresize')(window, $);
    // require('colresizable' );

    function Employee(image, name, position, salary, office) {
        this.image = image;
        this.name = name;
        this.position = position;
        this.salary = salary;
        this._office = office;

        this.office = function () {
            return this._office;
        }
    };

    $(function () {
        $('#table_id').DataTable({
            dom: 'Zlfrtip',
            // dom: 'Rlfrtip',
            // 'sDom': 'Rlfrtip',

            // data: [
            // new Employee(`${base_dir}/test/datatables/data/brie.jpg`, "Tiger Nixon", "System Architect", "$3,120", "Edinburgh"),
            // new Employee(`${base_dir}/test/datatables/data/cheddar.jpg`, "Garrett Winters", "Director", "$5,300", "Edinburgh")
            // ],
            columns: [
                { title: 'image' },
                { title: 'name' },
                { title: 'salary' },
                { title: 'office' },
                { title: 'position' }
            ],
            columnDefs: [{
                "targets": 0,
                "data": "image",
                "render": function (data, type, row, meta) {
                    return `<img src='${data}'>`
                },
                // "width": "200px" ,
            },
            { targets: 1, data: "name" },
            { targets: 2, data: "salary" },
            { targets: 3, data: "office" },
            { targets: 4, data: "position" }],

            // colResize: true,
            autoWidth: true,
            // scrollX: false,
            // colResize: {
            //     // scrollY: 200,       //cannot be used with DT scrollY
            //     // minColumnWidth: 50
            //     resizeTable: false
            // },
        })

        // let table = $('#table_id').DataTable()
        // table.colResizable({
		// 	liveDrag:true, 
		// 	gripInnerHtml:"<div class='grip'></div>", 
		// 	draggingClass:"dragging", 
        //     resizeMode:'fit'
        // });
        // table.on("column-resized.dt", function(event, columnIndex, newColumnWidth) {
        //     console.log(newColumnWidth)
        //     table.width = window.width
        // });

        // $("#table_id").colResizable({
		// 	liveDrag:true, 
		// 	gripInnerHtml:"<div class='grip'></div>", 
		// 	draggingClass:"dragging", 
        //     resizeMode:'fit'
        // });
    })
    function showPlayer() {
        let table = $('#table_id').DataTable()
        
        table.clear().rows.add([
            new Employee(`${base_dir}/test/datatables/data/brie.jpg`, "Tiger Nixon", "System Architect", "$3,120", "Edinburgh"),
            new Employee(`${base_dir}/test/datatables/data/cheddar.jpg`, "Garrett Winters", "Director", "$5,300", "Edinburgh")
        ])
        .draw()

        // $('#table_id thead th:eq(1)').width('10');
        // $('#table_id thead th:eq(2)').width('10');
        // table.draw();
    }

    function setWidth() {
        $('#table_id thead th:eq(1)').width('50');
    }

</script>

<body>
    <input type="button" value="show" onClick="showPlayer()">
    <input type="button" value="width" onClick="setWidth()">
    <table id="table_id" class="display" style="width:100%"></table>
</body>

</html>