<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <script>
        window.jQuery = window.$ = require('jquery');
    </script>
    <script type="text/javascript" src="../node_modules/datatables.net/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../node_modules/datatables.net-dt/css/jquery.dataTables.min.css">
    <script type="text/javascript" src="../lib/colResize/dataTables.colResize.js"></script>
    <link rel="stylesheet" type="text/css" href="../node_modules/jquery-contextmenu/dist/jquery.contextMenu.min.css">

    <script src="../node_modules/riot/riot+compiler.min.js"></script>
    <script type="riot/tag" src="../app/tags/library-datatable.tag"></script>
    <script type="riot/tag" src="../app/tags/search-datatable.tag"></script>
    <!--  <script  type="text/javascript" src="../node_modules/datatables.net/js/jquery.dataTables.min.js"></script>  -->
    <!--  <link rel="stylesheet" type="text/css" href="../node_modules/datatables.net-dt/css/jquery.dataTables.min.css">  -->
    <!--  <script  type="text/javascript" src="../lib/colResize/dataTables.colResize.js"></script>  -->
    <!--  <link rel="stylesheet" type="text/css" href="../node_modules/jquery-contextmenu/dist/jquery.contextMenu.min.css">  -->
</head>

<body>
    <div data-is="tabs"></div>
</body>

<script type="riot/tag">
    <tabs>
        <ul class="tabs">
            <li each="{tab, i in tabs}" class="{is-active: parent.index === i}" onclick="{parent.changeTab}">{tab}</li>
        </ul>
        <div show={ index===0 }>
            <input type="button" value="show" onClick="{showPlayer}">     
            <library-datatable></library-datatable>
        </div>
        <search-datatable show={ index===1 }><div>test2</div></search-datatable>
        <search-datatable show={ index===2 }><div>test3</div></search-datatable>
    
        <style>
            :scope {
            margin: 0 auto;
            width: 100%;
            background-color: #fff;
            box-shadow: 0 6px 40px rgba(201, 50, 16, .5);
            }
            .tabs {
            list-style: none;
            border-bottom: 1px solid #ebebeb;
            background-color: #fafafa;
            }
            .tabs::after {
            display: table;
            content: '';
            clear: both;
            }
            .tabs > li {
            position: relative;
            float: left;
            padding: .8em 0 1em;
            width: 33.33333%;
            color: #6c6c6c;
            text-align: center;
            cursor: default;
            }
            .tabs > li.is-active {
            color: #fd7557;
            font-weight: bold;
            }
            .tabs > li.is-active::before {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            content: '';
            border-top: 3px solid #fd6d4f;
            box-shadow: 0 0 8px rgba(234, 64, 26, .6);
            }
            .content {
            padding: 1.2em 1.4em;
            color: #4c4c4c;
            }
        </style>
    
        var self = this;
    
        // タブのタイトルを配列で管理
        self.tabs = [
            'Tab 1',
            'Tab 2',
            'Tab 3'
        ];
        // 初回表示時は0番目のタブを表示
        self.index = 0;
    
        // タブをクリックでindexを切り替え
        changeTab(event) {
            self.index = event.item.i;
        }

        function Employee(image, name, position, salary, office) {
            this.image = image;
            this.name = name;
            this.position = position;
            this.salary = salary;
            this._office = office;

            this.office = function () {
                return this._office;
            }
        };
        showPlayer(){
            const data_dir = "./datatables/data"
            const data_http1 = "http://localhost:8000/brie1"
            const data_http2 = "http://localhost:8000/brie2"
            const datas = [
                //new Employee(data_http1, "http Nixon", "System Architect", "$3,120", "Edinburgh"),
                new Employee(`${data_dir}/brie.jpg`, "Tiger Nixon", "System Architect", "$3,120", "Edinburgh"),
                new Employee(`${data_dir}/cheddar.jpg`, "Garrett Winters", "Director", "$5,300", "Edinburgh"),
                new Employee(`${data_dir}/brie.jpg`, "Garrett", "Director", "$5,300", "Edinburgh"),
                new Employee(`${data_dir}/brie.jpg`, "Winters", "Director", "$5,300", "Edinburgh"),
                new Employee(`${data_dir}/cheddar.jpg`, "t Winters", "Director", "$5,300", "Edinburgh"),
                //new Employee(data_http2, "http Winters", "Director", "$5,300", "Edinburgh"),
            ]
            obs.trigger("receivedData", datas)
        }
    </tabs>
</script>

<script>
    const remote = require('electron').remote
    const base_dir = remote.getGlobal('sharedObj').base_dir

    require('jquery-contextmenu');
    var obs = riot.observable();
    ///var riot = require('riot')
    //require("../app/tags/search-datatable.tag")
    riot.mount('*');
</script>

</html>