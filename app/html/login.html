<!DOCTYPE html>
<html>
    <title>ニコニコ動画へのログイン</title>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Security-Policy" 
            content="script-src 'self' 'unsafe-inline' 'unsafe-eval';
                style-src 'self' 'unsafe-inline';"/>
        <link rel="stylesheet" type="text/css" href="../css/app.css">
        <style type="text/css">
            .container {
                width: 100%;
                height: 100%;
                display: grid;
                grid-template-rows: 1fr 50px;
                grid-template-areas: 
                    "item1"
                    "item2";
            }

            .input-container {
                grid-area: item1;
                color: black;
                user-select: none;
            } 
            .input-container label { 
               width: 90px;
               display:block;
               float: left;
            }   
            .input-container input {
                width: calc(100vw - 120px);
            } 

            .button-container {
                grid-area: item2;
                margin: auto;
            }
            .button { 
                display: inline-block;
                text-align: center;
                border: 1px solid #aaa;
                width: 100px;
                height: 30px;
                line-height: 30px;
                cursor: pointer; 
                user-select: none;
            }   
            .button:hover { 
                background-color: lightskyblue;
            }
        </style>
    </head>

    <body>
        <div class="container">
            <div class="center-hv input-container">
                <div style="display:block;">
                    <div style="margin-bottom: 5px;">
                        <label for="mail">Mail address:</label>
                        <input type="text" id="mail" name="mail" autofocus>
                    </div>
                    <div >
                        <label for="password">Password:</label>
                        <input type="password" id="pass" name="password" required>
                    </div>
                </div>
            </div>
            <div class="button-container">
                <div class="button" onclick=onclickLogin()>ログイン</div>
                <div class="button" onclick=onclickClose()>閉じる</div>
            </div>
        </div>
    </body>
    
    <script>
        const ipc = window.electron.ipcRenderer;
        
        const onclickLogin = e =>{
            const mail = document.querySelector("#mail");
            const password = document.querySelector("#pass");
            ipc.send("app:nico-login", {
                mail: mail.value,
                password: password.value,
            });
        };
        const onclickClose = e =>{
            ipc.send("app:nico-login-cancel");
        };
    </script>
</html>